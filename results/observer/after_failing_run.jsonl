{"event_type": "after_failing_run", "pipeline_run_id": "6gqXhLs23iyEYojbgQgarP", "pipe_job": {"pipe": {"pipe_category": "PipeController", "type": "PipeSequence", "code": "assess_image_sensitivity", "domain": "image_sensitivity_assessment", "description": "MAIN PIPE - Orchestrates the complete workflow to assess image sensitivity based on rules, analyzing content and comparing against sensitivity criteria to produce a structured assessment with classification, rating, and deletion recommendations.\n", "inputs": {"root": {"image": {"concept": {"code": "Image", "domain": "native", "description": "An image", "structure_class_name": "ImageContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "multiplicity": null, "__class__": "InputRequirement", "__module__": "pipelex.core.pipes.input_requirements"}, "rules": {"concept": {"code": "Text", "domain": "native", "description": "A text", "structure_class_name": "TextContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "multiplicity": null, "__class__": "InputRequirement", "__module__": "pipelex.core.pipes.input_requirements"}}, "__class__": "InputRequirements", "__module__": "pipelex.core.pipes.input_requirements"}, "output": {"code": "SensitivityAssessment", "domain": "image_sensitivity_assessment", "description": "Structured evaluation of information sensitivity based on predefined rules.", "structure_class_name": "SensitivityAssessment", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "sequential_sub_pipes": [{"pipe_code": "extract_image_content", "output_name": "extracted_pages", "output_multiplicity": null, "batch_params": null, "concept_codes_from_the_same_domain": ["SensitivityAssessment", "ContentAnalysis"], "__class__": "SubPipe", "__module__": "pipelex.pipe_controllers.sub_pipe"}, {"pipe_code": "analyze_image_content", "output_name": "content_analysis", "output_multiplicity": null, "batch_params": null, "concept_codes_from_the_same_domain": ["SensitivityAssessment", "ContentAnalysis"], "__class__": "SubPipe", "__module__": "pipelex.pipe_controllers.sub_pipe"}, {"pipe_code": "classify_sensitivity", "output_name": "sensitivity_assessment", "output_multiplicity": null, "batch_params": null, "concept_codes_from_the_same_domain": ["SensitivityAssessment", "ContentAnalysis"], "__class__": "SubPipe", "__module__": "pipelex.pipe_controllers.sub_pipe"}], "__class__": "PipeSequence", "__module__": "pipelex.pipe_controllers.sequence.pipe_sequence"}, "working_memory": {"root": {"image": {"stuff_code": "BqYKF", "stuff_name": "image", "concept": {"code": "Image", "domain": "native", "description": "An image", "structure_class_name": "ImageContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "content": {"url": "http://localhost:3001/uploads/user-screenshot-d1c83de7-2690-46fb-9c7a-ff010b5bc436-1761792808364.png", "source_prompt": null, "caption": null, "base_64": null, "__class__": "ImageContent", "__module__": "pipelex.core.stuffs.image_content"}, "__class__": "Stuff", "__module__": "pipelex.core.stuffs.stuff"}, "rules": {"stuff_code": "endFp", "stuff_name": "rules", "concept": {"code": "Text", "domain": "native", "description": "A text", "structure_class_name": "TextContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "content": {"text": "\n# Privacy Classification Rules\n\n## CONFIDENTIAL (Rating 8-10)\n- API keys, passwords, tokens, certificates\n- Customer personal data (SSN, credit cards, addresses)\n- Financial data, salary information\n- Medical records, HIPAA protected data\n- Legal documents, contracts\n- Internal company strategies, unreleased products\n\n## INTERNAL (Rating 5-7)\n- Employee directories, org charts\n- Internal system screenshots, dashboards\n- Company financial reports (non-public)\n- Internal project timelines, roadmaps\n- Customer lists, business contacts\n\n## RESTRICTED (Rating 3-4)\n- Source code, architecture diagrams\n- Database schemas, system configurations\n- Training materials, internal processes\n- Performance data, metrics\n\n## PUBLIC (Rating 0-2)\n- Marketing materials, public websites\n- Published documentation\n- General business information\n- Public social media content\n", "__class__": "TextContent", "__module__": "pipelex.core.stuffs.text_content"}, "__class__": "Stuff", "__module__": "pipelex.core.stuffs.stuff"}}, "aliases": {}, "__class__": "WorkingMemory", "__module__": "pipelex.core.memory.working_memory"}, "pipe_run_params": {"run_mode": "live", "final_stuff_code": null, "is_with_preliminary_text": null, "output_multiplicity": null, "dynamic_output_concept_code": null, "batch_params": null, "params": {}, "pipe_stack_limit": 20, "pipe_stack": ["assess_image_sensitivity", "extract_image_content"], "pipe_layers": ["assess_image_sensitivity"], "__class__": "PipeRunParams", "__module__": "pipelex.pipe_run.pipe_run_params"}, "job_metadata": {"job_name": null, "pipeline_run_id": "6gqXhLs23iyEYojbgQgarP", "pipe_job_ids": ["assess_image_sensitivity", "extract_image_content"], "content_generation_job_id": "make_llm_text", "unit_job_id": "llm_gen_text", "job_category": "llm_job", "started_at": {"datetime": "2025-10-29 20:17:45.922186", "tzinfo": null, "__class__": "datetime", "__module__": "datetime"}, "completed_at": null, "__class__": "JobMetadata", "__module__": "pipelex.pipeline.job_metadata"}, "output_name": null, "__class__": "PipeJob", "__module__": "pipelex.pipe_run.pipe_job"}, "error": {"message": "Error generating text with LLM in pipe 'assess_image_sensitivity.extract_image_content': OpenAI bad request error with model: SDK[openai]\u2022Backend[blackboxai]\u2022Model[blackboxai/anthropic/claude-sonnet-4.5]:\nError code: 400 - {'error': {'message': \"litellm.BadRequestError: AnthropicException - Error: Unable to fetch image from URL after 3 attempts. url=http://localhost:3001/uploads/user-screenshot-d1c83de7-2690-46fb-9c7a-ff010b5bc436-1761792808364.png\\nReceived Messages=[{'role': 'user', 'content': [{'text': 'Extract the text from the image: [Image 1]', 'type': 'text'}, {'image_url': {'url': 'http://localhost:3001/uploads/user-screenshot-d1c83de7-2690-46fb-9c7a-ff010b5bc436-1761792808364.png', 'detail': 'high'}, 'type': 'image_url'}]}]. Received Model Group=blackboxai/anthropic/claude-sonnet-4.5\\nAvailable Model Group Fallbacks=None\", 'type': None, 'param': None, 'code': '400'}}", "__class__": "PipeRunError", "__module__": "pipelex.exceptions"}}
{"event_type": "after_failing_run", "pipeline_run_id": "8uh9yrfrBtFahCNrcv6WyK", "pipe_job": {"pipe": {"pipe_category": "PipeController", "type": "PipeSequence", "code": "assess_image_sensitivity", "domain": "image_sensitivity_assessment", "description": "MAIN PIPE - Orchestrates the complete workflow to assess image sensitivity based on rules, analyzing content and comparing against sensitivity criteria to produce a structured assessment with classification, rating, and deletion recommendations.\n", "inputs": {"root": {"image": {"concept": {"code": "Image", "domain": "native", "description": "An image", "structure_class_name": "ImageContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "multiplicity": null, "__class__": "InputRequirement", "__module__": "pipelex.core.pipes.input_requirements"}, "rules": {"concept": {"code": "Text", "domain": "native", "description": "A text", "structure_class_name": "TextContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "multiplicity": null, "__class__": "InputRequirement", "__module__": "pipelex.core.pipes.input_requirements"}}, "__class__": "InputRequirements", "__module__": "pipelex.core.pipes.input_requirements"}, "output": {"code": "SensitivityAssessment", "domain": "image_sensitivity_assessment", "description": "Structured evaluation of information sensitivity based on predefined rules.", "structure_class_name": "SensitivityAssessment", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "sequential_sub_pipes": [{"pipe_code": "extract_image_content", "output_name": "extracted_pages", "output_multiplicity": null, "batch_params": null, "concept_codes_from_the_same_domain": ["SensitivityAssessment", "ContentAnalysis"], "__class__": "SubPipe", "__module__": "pipelex.pipe_controllers.sub_pipe"}, {"pipe_code": "analyze_image_content", "output_name": "content_analysis", "output_multiplicity": null, "batch_params": null, "concept_codes_from_the_same_domain": ["SensitivityAssessment", "ContentAnalysis"], "__class__": "SubPipe", "__module__": "pipelex.pipe_controllers.sub_pipe"}, {"pipe_code": "classify_sensitivity", "output_name": "sensitivity_assessment", "output_multiplicity": null, "batch_params": null, "concept_codes_from_the_same_domain": ["SensitivityAssessment", "ContentAnalysis"], "__class__": "SubPipe", "__module__": "pipelex.pipe_controllers.sub_pipe"}], "__class__": "PipeSequence", "__module__": "pipelex.pipe_controllers.sequence.pipe_sequence"}, "working_memory": {"root": {"image": {"stuff_code": "EpPFz", "stuff_name": "image", "concept": {"code": "Image", "domain": "native", "description": "An image", "structure_class_name": "ImageContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "content": {"url": "/Users/prasanna/Desktop/Screenshot\\ 2025-10-12\\ at\\ 1.26.03\\ PM.png", "source_prompt": null, "caption": null, "base_64": null, "__class__": "ImageContent", "__module__": "pipelex.core.stuffs.image_content"}, "__class__": "Stuff", "__module__": "pipelex.core.stuffs.stuff"}, "rules": {"stuff_code": "CmjQL", "stuff_name": "rules", "concept": {"code": "Text", "domain": "native", "description": "A text", "structure_class_name": "TextContent", "refines": null, "__class__": "Concept", "__module__": "pipelex.core.concepts.concept"}, "content": {"text": "\n# Privacy Classification Rules\n\n## CONFIDENTIAL (Rating 8-10)\n- API keys, passwords, tokens, certificates\n- Customer personal data (SSN, credit cards, addresses)\n- Financial data, salary information\n- Medical records, HIPAA protected data\n- Legal documents, contracts\n- Internal company strategies, unreleased products\n\n## INTERNAL (Rating 5-7)\n- Employee directories, org charts\n- Internal system screenshots, dashboards\n- Company financial reports (non-public)\n- Internal project timelines, roadmaps\n- Customer lists, business contacts\n\n## RESTRICTED (Rating 3-4)\n- Source code, architecture diagrams\n- Database schemas, system configurations\n- Training materials, internal processes\n- Performance data, metrics\n\n## PUBLIC (Rating 0-2)\n- Marketing materials, public websites\n- Published documentation\n- General business information\n- Public social media content\n", "__class__": "TextContent", "__module__": "pipelex.core.stuffs.text_content"}, "__class__": "Stuff", "__module__": "pipelex.core.stuffs.stuff"}}, "aliases": {}, "__class__": "WorkingMemory", "__module__": "pipelex.core.memory.working_memory"}, "pipe_run_params": {"run_mode": "live", "final_stuff_code": null, "is_with_preliminary_text": null, "output_multiplicity": null, "dynamic_output_concept_code": null, "batch_params": null, "params": {}, "pipe_stack_limit": 20, "pipe_stack": ["assess_image_sensitivity", "extract_image_content"], "pipe_layers": ["assess_image_sensitivity"], "__class__": "PipeRunParams", "__module__": "pipelex.pipe_run.pipe_run_params"}, "job_metadata": {"job_name": null, "pipeline_run_id": "8uh9yrfrBtFahCNrcv6WyK", "pipe_job_ids": ["assess_image_sensitivity", "extract_image_content"], "content_generation_job_id": "make_llm_text", "unit_job_id": "llm_gen_text", "job_category": "llm_job", "started_at": {"datetime": "2025-10-29 20:24:15.542739", "tzinfo": null, "__class__": "datetime", "__module__": "datetime"}, "completed_at": null, "__class__": "JobMetadata", "__module__": "pipelex.pipeline.job_metadata"}, "output_name": null, "__class__": "PipeJob", "__module__": "pipelex.pipe_run.pipe_job"}, "error": {"message": "Error generating text with LLM in pipe 'assess_image_sensitivity.extract_image_content': OpenAI bad request error with model: SDK[openai]\u2022Backend[blackboxai]\u2022Model[blackboxai/anthropic/claude-sonnet-4.5]:\nError code: 400 - {'error': {'message': 'litellm.BadRequestError: AnthropicException - Image url not in expected format. Example Expected input - \"image_url\": \"data:image/jpeg;base64,{base64_image}\". Supported formats - [\\'image/jpeg\\', \\'image/png\\', \\'image/gif\\', \\'image/webp\\'].\\nReceived Messages=[{\\'role\\': \\'user\\', \\'content\\': [{\\'text\\': \\'Extract the text from the image: [Image 1]\\', \\'type\\': \\'text\\'}, {\\'image_url\\': {\\'url\\': \\'/Users/prasanna/Desktop/Screenshot\\\\\\\\ 2025-10-12\\\\\\\\ at\\\\\\\\ 1.26.03\\\\\\\\ PM.png\\', \\'detail\\': \\'high\\'}, \\'type\\': \\'image_url\\'}]}]. Received Model Group=blackboxai/anthropic/claude-sonnet-4.5\\nAvailable Model Group Fallbacks=None', 'type': None, 'param': None, 'code': '400'}}", "__class__": "PipeRunError", "__module__": "pipelex.exceptions"}}
